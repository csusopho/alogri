[Problem: 3637. 三段式数组 I](https://leetcode.cn/problems/trionic-array-i/description/)

### 模拟

要求数组呈现 **“N”字形**：先上升，后下降，最后再上升（山峰+山谷）。

只需要模拟题意，按顺序验证三个阶段，确保每个阶段都严格符合条件，并且这三个阶段加起来刚好覆盖整个数组。

**第一阶段：严格递增** $nums[0...p]$

- 从索引 $0$ 开始，只要当前元素小于下一个元素，就继续向后移动。
- 检查点：移动停止后，索引 $i$ 不能停在 $0$（说明没有上升过），也不能停在 $n-1$（说明整个数组都是递增的）。

**第二阶段：严格递减** $nums[p...q]$

- 从第一阶段停止的位置开始，只要当前元素大于下一个元素，就继续向后移动。
- 检查点：移动停止后，索引 $i$ 不能停在刚才的位置（说明没有下降过），也不能停在 $n-1$（说明后面没有空间再上升）。

**第三阶段：严格递增** $nums[q...n-1]$

- 从第二阶段停止的位置开始，只要当前元素小于下一个元素，就继续向后移动。
- 最终检查：移动停止后，索引 $i$ 必须正好停在数组的最后一个位置 $n-1$。

代码如下，已附加注释：

```Python
# python
class Solution:
    def isTrionic(self, nums: List[int]) -> bool:
        n = len(nums)
        # 至少需要4个元素
        if n < 4:
            return False
        
        i = 0

        # 第一步：爬坡
        while i + 1 < n and nums[i] < nums[i+1]:
            i += 1
        # 检查
        if i == 0 or i == n - 1:
            return False
        
        # 第二步：下坡
        p = i
        while i + 1 < n and nums[i] > nums[i+1]:
            i += 1
        # 检查
        if i == p or i == n - 1:
            return False
            
        # 第三步：再次爬坡
        q = i
        while i + 1 < n and nums[i] < nums[i+1]:
            i += 1
        # 检查
        return i == n - 1
```

```Java
// java
class Solution {
    public boolean isTrionic(int[] nums) {
        int n = nums.length;
        // 至少需要4个元素
        if (n < 4) {
            return false;
        }
        
        int i = 0;

        // 第一步：爬坡
        while (i + 1 < n && nums[i] < nums[i+1]) {
            i++;
        }
        // 检查
        if (i == 0 || i == n - 1) {
            return false;
        }
        
        // 第二步：下坡
        int p = i;
        while (i + 1 < n && nums[i] > nums[i+1]) {
            i++;
        }
        // 检查
        if (i == p || i == n - 1) {
            return false;
        }
            
        // 第三步：再次爬坡
        int q = i;
        while (i + 1 < n && nums[i] < nums[i+1]) {
            i++;
        }
        // 检查
        return i == n - 1;
    }
}
```

- 时间复杂度： $O(n)$，其中 $n$ 为数组 $nums$ 的长度
- 空间复杂度： $O(1)$，仅使用常数个额外变量

如果本篇题解你觉得写得不错，欢迎点个赞让更多人看见~

> 题解已发布力扣平台 [我的题解](https://leetcode.cn/problems/trionic-array-i/solutions/3895020/mo-ni-nzi-xing-shu-zu-san-duan-whilejian-nkkz/)
