[Problem: 3432. 统计元素和差值为偶数的分区方案](https://leetcode.cn/problems/count-partitions-with-even-sum-difference/description/)

### 方法：模拟 & 脑筋急转弯

题意很简单，就是用左侧和减去右侧和。

不使用暴力，使用 **前缀和** 进行优化，动态计算左侧总和。同时，提前计算出数组总和，这样一来，右侧和 = 总和 - 左侧和，避免了反复对右半部分求和。

代码如下，已附加注释：

```Python
# python
class Solution:
    def countPartitions(self, nums: List[int]) -> int:
        n = len(nums)
        ans = 0
        total = sum(nums)  # 预先计算总和
        left = 0           # 动态维护左部分的和

        # 枚举分割点
        for i in range(n - 1):
            left += nums[i]
            right = total - left
            # 判断
            if abs(right - left) % 2 == 0:
                ans += 1
        
        return ans
```

```Java
// java
class Solution {
    public int countPartitions(int[] nums) {
        int n = nums.length;
        int ans = 0;
        long total = 0;
        for (int x : nums) total += x; // 预先计算总和
        long left = 0;           // 动态维护左部分的和

        // 枚举分割点
        for (int i = 0; i < n - 1; i++) {
            left += nums[i];
            long right = total - left;
            // 判断
            if (Math.abs(right - left) % 2 == 0) {
                ans++;
            }
        }
        
        return ans;
    }
}
```

- 时间复杂度： $O(n)$，其中 $n$ 是数组 $nums$ 的长度
- 空间复杂度： $O(1)$，仅使用常数个额外变量

---

### 脑筋急转弯

实际上，根据数学知识可知，

- 奇数 - 奇数 = 偶数；
- 偶数 - 偶数 = 偶数；
- 奇数 - 偶数 = 奇数；
- 偶数 - 奇数 = 奇数。

也即，只要总和是偶数，左侧是奇/偶数时，右侧必须是奇/偶数，两者相减一定是偶数。同理，只要总和是奇数，两者相减一定是奇数。

答案一定是 $n-1$ 或 $0$，代码如下：

```Python
# python
class Solution:
    def countPartitions(self, nums: List[int]) -> int:
        return len(nums) - 1 if sum(nums) % 2 == 0 else 0
```

```Java
// java
class Solution {
    public int countPartitions(int[] nums) {
        return Arrays.stream(nums).asLongStream().sum() % 2 == 0 ? nums.length - 1 : 0;
    }
}
```

同样地，用 **异或** 也能达成目的，代码如下：

```Python
# python
class Solution:
    def countPartitions(self, nums: List[int]) -> int:
        return (len(nums) - 1) * ((reduce(xor, nums) & 1) == 0)
```

```Java
// java
class Solution {
    public int countPartitions(int[] nums) {
        return ((Arrays.stream(nums).reduce(0, (a, b) -> a ^ b) & 1) == 0) ? nums.length - 1 : 0;
    }
}
```

- 时间复杂度： $O(n)$
- 空间复杂度： $O(1)$

如果本篇题解你觉得写得不错，欢迎点个赞让更多人看见~

> 题解已发布力扣平台 [我的题解](https://leetcode.cn/problems/count-partitions-with-even-sum-difference/solutions/3849597/san-jie-mo-ni-nao-jin-ji-zhuan-wan-yi-hu-e0ad/)
