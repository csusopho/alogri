[Problem: 3370. 仅含置位位的最小整数](https://leetcode.cn/problems/smallest-number-with-all-set-bits/description/)

### 方法：位运算 & 打表

仅包含 “置位” 的数是什么？从二进制的角度看： $1_2=1,11_2=3,111_2=7,\dots$。

根据数学知识可知， $1\to10\to11$ 的过程是 $<<$ 左移一位再 $+1$。

所以，我们只需要 **从小到大** 不断向上枚举，直至这个数 $\geq n$ 即可。

代码如下，已附加注释：

```Python
# python
class Solution:
    def smallestNumber(self, n: int) -> int:
        # 从最小的“全1”数开始
        x = 1

        # 不断生成下一个“全1”的数
        while x < n:
            x = (x << 1) | 1
        
        return x
```

```Java
// java
class Solution {
    public int smallestNumber(int n) {
        // 从最小的“全1”数开始
        int x = 1;

        // 不断生成下一个“全1”的数
        while (x < n) {
            x = (x << 1) | 1;
        }

        return x;
    }
}
```

- 时间复杂度： $O(logn)$，总位数超过 $n$ 就会停止，而 $n$ 一共有 $log_2n$ 个位
- 空间复杂度： $O(1)$，仅使用常数个额外变量

---

### 位运算

只要 $x$ 的总位数 $\geq logn$，则一定有 $x\geq n$。那么，让 $x$ 中置位的个数正好为 $logn$，则它就是符合要求的最小数。

因此，可以一步出答案，代码如下：

```Python
# python
class Solution:
    def smallestNumber(self, n: int) -> int:
        return (1 << n.bit_length()) - 1
```

```Java
// java
class Solution {
    public int smallestNumber(int n) {
        int numBits = 32 - Integer.numberOfLeadingZeros(n);
        return (1 << numBits) - 1;
    }
}
```

- 时间复杂度： $O(1)$，两次数学运算
- 空间复杂度： $O(1)$

---

### 打表

题目指定 $n\leq 10^3$，所以答案一定在 $1$ ~ “第一个大于 $10^3$ 的置位” 之间。

提前计算出范围内的 $10$ 个数，线性遍历即可，代码如下：

```Python
# python
RECORD = [1, 3, 7, 15, 31, 63, 127, 255, 511, 1023]

class Solution:
    def smallestNumber(self, n: int) -> int:
        # 找到第一个大于等于 n 的数
        for x in RECORD:
            if x >= n:
                return x
```

```Java
// java
class Solution {
    private static final int[] RECORD = {1, 3, 7, 15, 31, 63, 127, 255, 511, 1023};
    
    public int smallestNumber(int n) {
        for (int x : RECORD) {
            // 找到第一个大于或等于 n 的数并返回
            if (x >= n) {
                return x;
            }
        }
        return -1;
    }
}
```

- 时间复杂度： $O(1)$
- 空间复杂度： $O(1)$

如果本篇题解你觉得写得不错，欢迎点个赞让更多人看见~

> 题解已发布力扣平台 [我的题解](https://leetcode.cn/problems/smallest-number-with-all-set-bits/solutions/3818375/san-jie-bao-li-mei-ju-wei-yun-suan-yi-xi-sovl/)
