[Problem: 1523. 在区间范围内统计奇数数目](https://leetcode.cn/problems/count-odd-numbers-in-an-interval-range/description/)

### 方法：位运算

求 $[low,high]$ 中的奇数个数。假如我们已知 $[0,low)$ 之间的奇数个数为 $x$，以及 $[0,high]$ 之间的奇数个数为 $y$，则两者相减 $y-x$，就是目标个数。

区间作差，也即 `[low,high] = [0,high] - [0,low)`，实则是 **前缀和** 的体现。前缀和是指 “从开始到当前” 的累加和，两者相减，就能得到任意区间和。

$[0,low)$ 之间的奇数有多少个？大概奇偶各占一半，由于右边界不包含，所以是 $low/2$ 个。而区间 $[0,high]$ 右边界包含，所以有 $(high+1)/2$ 个奇数。

$\textbf{一行流仅供整活使用，一般不推荐}$，代码如下：

```Python
# python
class Solution:
    def countOdds(self, low: int, high: int) -> int:
        return ((high + 1) >> 1) - (low >> 1)
```

```Java
// java
class Solution {
    public int countOdds(int low, int high) {
        return ((high + 1) >> 1) - (low >> 1);
    }
}
```

或者换一种写法，使用 `&` 与运算，判断两个右边界的关系。

```Python
# python
class Solution:
    def countOdds(self, low: int, high: int) -> int:
        return (high - low >> 1) + (high & 1 | low & 1)
```

```Java
// java
class Solution {
    public int countOdds(int low, int high) {
        return (high - low >> 1) + (high & 1 | low & 1);
    }
}
```

- 时间复杂度： $O(1)$
- 空间复杂度： $O(1)$

如果本篇题解你觉得写得不错，欢迎点个赞让更多人看见~

> 题解已发布力扣平台 [我的题解](https://leetcode.cn/problems/count-odd-numbers-in-an-interval-range/solutions/3850829/shuang-jie-shi-yong-huo-zhe-jin-xing-wei-g43k/)
