[Problem: 3021. Alice 和 Bob 玩鲜花游戏](https://leetcode.cn/problems/alice-and-bob-playing-flower-game/description/)

### 方法：数学

$Alice$ 先手，且谁先消耗完谁就获胜，如果只有一朵鲜花，就是 $Alice$ 胜利。

将此过程抽象为 “两堆石子游戏”：两堆的大小分别是 $x$ 和 $y$，每回合只能从其中一堆拿走 $1$ 个。这样胜负只取决于总数 $x+y$ 的 **奇偶性**：

- 若 $x+y$ 为奇数：总步数为奇数，先手 $Alice$ 必拿到最后一个， $Alice$ 必胜。
- 若 $x+y$ 为偶数：总步数为偶数，后手 $Bob$ 拿到最后一个， $Alice$ 必败。

因此题目 **等价于**：统计区间 $x\in[1,n],\,y\in[1,m]$ 中，使 $x+y$ 为奇数的二元组个数。  也就是 $x$ 与 $y$ 一奇一偶的配对数：

- 在范围 $[1,n]$ 中，一共有 $n_1 = \left\lfloor \frac{n+1}{2} \right\rfloor$ 个奇数，有 $n_2 = \left\lfloor \frac{n}{2} \right\rfloor$ 个偶数。
- 在范围 $[1,m]$ 中，一共有 $n_1 = \left\lfloor \frac{m+1}{2} \right\rfloor$ 个奇数，有 $n_2 = \left\lfloor \frac{m}{2} \right\rfloor$ 个偶数。

那么，最终答案为：

$$
n_1 \times m_2 + m_1 \times n_2
$$

代码如下，记得使用 $long$ 防止溢出：

```Python
# python
class Solution:
    def flowerGame(self, n: int, m: int) -> int:
        n1 = (n + 1) // 2
        n2 = n // 2
        m1 = (m + 1) // 2
        m2 = m // 2
        return n1 * m2 + m1 * n2
```

```Java
// java
class Solution {
    public long flowerGame(int n, int m) {
        long n1 = (n + 1) / 2;
        long n2 = n / 2;
        long m1 = (m + 1) / 2;
        long m2 = m / 2;
        return n1 * m2 + m1 * n2;
    }
}
```

- 时间复杂度： $O(1)$，数学计算
- 空间复杂度： $O(1)$，仅使用常数个额外变量

---

### 简化

我们可以分情况进行讨论，从而简化上式。

- 情形 1： $n,m$ 均为偶数，此时

$$
n_1 = n_2 = \frac{n}{2}, \quad m_1 = m_2 = \frac{m}{2}
$$

因此

$$
n_1 m_2 + n_2 m_1 \;=\; \frac{n}{2}\cdot \frac{m}{2} + \frac{n}{2}\cdot \frac{m}{2}
= \frac{nm}{2}
$$

- 情形 2： $n$ 偶，$m$ 奇，此时

$$
n_1 = n_2 = \frac{n}{2}, \quad m_1 = \frac{m+1}{2}, \quad m_2 = \frac{m-1}{2}
$$

因此

$$
n_1 m_2 + n_2 m_1 \;=\; \frac{n}{2}\cdot \frac{m-1}{2} + \frac{n}{2}\cdot \frac{m+1}{2}
= \frac{nm}{2}
$$

- 情形 3： $n$ 奇 $m$ 偶，与上类似，有

$$
n_1 = \frac{n+1}{2}, \quad n_2 = \frac{n-1}{2}, \quad m_1 = m_2 = \frac{m}{2}
$$

因此

$$
n_1 m_2 + n_2 m_1 \;=\; \frac{n+1}{2}\cdot \frac{m}{2} + \frac{n-1}{2}\cdot \frac{m}{2}
= \frac{nm}{2}
$$

- 情形 4：$n,m$ 均为奇数，此时

$$
n_1 = \frac{n+1}{2}, \quad n_2 = \frac{n-1}{2}, \quad m_1 = \frac{m+1}{2}, \quad m_2 = \frac{m-1}{2}
$$

因此

$$
n_1 m_2 + n_2 m_1 \;=\; \frac{n+1}{2}\cdot \frac{m-1}{2} + \frac{n-1}{2}\cdot \frac{m+1}{2}
= \frac{nm}{2}
$$

综上，以下等式在四种情况下都成立

$$
n_1 m_2 + n_2 m_1 = \frac{n m}{2}
$$

代码如下：

```Python
# python
class Solution:
    def flowerGame(self, n: int, m: int) -> int:
        return n * m // 2
```

```Java
// java
class Solution {
    public long flowerGame(int n, int m) {
        return (long) n * m / 2;
    }
}
```

- 时间复杂度： $O(1)$
- 空间复杂度： $O(1)$

如果本篇题解你觉得写得不错，欢迎点个赞让更多人看见~

> 题解已发布力扣平台 [我的题解](https://leetcode.cn/problems/alice-and-bob-playing-flower-game/solutions/3766906/shu-xue-chou-xiang-wei-shi-zi-you-xi-shu-gzre/)
