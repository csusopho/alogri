[Problem: 1227. 飞机座位分配概率](https://leetcode.cn/problems/airplane-seat-assignment-probability/description/)

### 方法：数学

题意：第一个人随便坐，剩下的人尽量坐自己的位置，求第 $n$ 个人坐在自己位置的概率。

找规律：

总共 $2$ 个人。

- 第一个人如果坐在座位 $1$，第二个人一定可以坐到座位 $2$，概率为 $\frac{1}{2}$；
- 第一个人如果坐在座位 $2$，第二个人一定坐不到座位 $2$，概率为 $0$；
- 累加之后的总概率为 $\frac{1}{2}$。

总共 $3$ 个人。

- 第一个人如果坐在座位 $1$，第二个人与第三个人都可以坐到自己座位，概率为 $\frac{1}{3}$；
- 第一个人如果坐在座位 $2$，第二个人必须坐在座位 $1$，第三个人才能坐到自己位置，概率为 $\frac{1}{3}\times \frac{1}{2}=\frac{1}{6}$；
- 第一个人如果坐在座位 $3$，第三个人一定坐不到自己位置，概率为 $0$；
- 累加之后的总概率为 $\frac{1}{2}$。

总共 $4$ 个人。

- 第一个人如果坐在座位 $1$，剩下人一定都能坐到自己座位，概率为 $\frac{1}{4}$；
- 第一个人如果坐在座位 $2$，那么第二个人一定随便坐，情况就相当于他是第一个人，在三个座位中随便找一个，那第四个人坐在自己座位的概率为 $\frac{1}{4}\times \frac{1}{2}=\frac{1}{8}$；
- 第一个人如果坐在座位 $3$，那么第三个人就随便坐，情况相当于他是第一个人，三个位置中找一个坐，那第四个人坐在自己座位的概率为 $\frac{1}{4}\times \frac{1}{2}=\frac{1}{8}$；
- 第一个人如果坐在座位 $4$，第四个人一定坐不到自己位置，概率为 $0$；
- 累加之后的总概率为 $\frac{1}{2}$。

这个时候，找到一点规律。假设人数为 $n$，可以大致得出以下结论：

1. 第一个人坐在自己座位，目标一定可行，概率为 $\frac{1}{n}$；
2. 第一个人抢了最后一个座位，目标一定不可行，概率为 $0$；
3. 第一个人在中间坐，假设它抢的是第 $x$ 个座位，此时转化一下，将这第 $x$ 个人理解为第一个人，他要随便坐，座位是 $n-1$ 个，那么目标的概率就是 $\frac{1}{n}\times pre$。 $pre$ 表示前一种情况的答案，而这种中间坐的可能性有 $n-2$ 种。

采用 **数学归纳法**，假设前一种情况 $n-1$ 个人的答案是 $\frac{1}{2}$，那么 $n$ 个人的答案就是 $\frac{1}{n}+\frac{1}{n}\times \frac{1}{2} \times(n-2)+0=\frac{1}{2}$。

用数学公式规范一下，将第 $n$ 个人坐在自己位置的概率记作 $f(n)$，那么就有

$$
f(n) = \frac{1}{n} + \frac{1}{n} \times (f(n-1) + f(n-1) + \cdots + f(n-1))
= \frac{1}{n} + \frac{1}{n} \times \frac{n-2}{2} = \frac{1}{2} \quad (n \geq 2)
$$

这种思路的 **本质** 就是将被抢位置的第 $x$ 人当作第一个人，反正他要随便坐，和第一个人的性质一样，剔除第 $x$ 个座位，剩余 $n-1$ 个座位，也就转变成了子问题。

不过，注意只有一个人，也就是 $n=1$ 的情况，此时再随便坐的概率也都是 $1$。

总结一下，

$$
f(n) =
\begin{cases}
1, & n = 1 \\
\frac{1}{2}, & n \geq 2
\end{cases}
$$

当然，如果这种规律看不出来，那就在草稿纸上举几个例子，发现答案都是 $\frac{1}{2}$，那就大胆一点，相信直觉。示例只给了 $2$ 个，估计就是怕大家都猜出来。

代码都写得一样，所以速度不会是百分百：

```Python
# python
class Solution:
    def nthPersonGetsNthSeat(self, n: int) -> float:
        return 1 if n == 1 else 0.5
```

```Java
// java
class Solution {
    public double nthPersonGetsNthSeat(int n) {
        return n == 1 ? 1 : 0.5;
    }
}
```

- 时间复杂度： $O(1)$
- 空间复杂度： $O(1)$

如果本篇题解你觉得写得不错，欢迎点个赞让更多人看见~

> 题解已发布力扣平台 [我的题解](https://leetcode.cn/problems/airplane-seat-assignment-probability/solutions/2938494/shu-xue-zhuan-hua-zi-wen-ti-shu-xue-gui-5tq8f/)
